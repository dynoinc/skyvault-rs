syntax = "proto3";

package skyvault;

service Batcher {
  rpc WriteBatch (WriteBatchRequest) returns (WriteBatchResponse);
}

service Index {
  rpc IndexDocument (IndexRequest) returns (IndexResponse);
}

service Orchestrator {
  rpc Orchestrate (OrchestrateRequest) returns (OrchestrateResponse);
}

message WriteBatchRequest {
  repeated TableBatch tables = 1;
}

message TableBatch {
  string table_name = 1;
  repeated WriteBatchItem items = 2;
}

message WriteBatchItem {
  string key = 1;
  oneof operation {
    bytes value = 2;
    bool delete = 3;
  }
}

message WriteBatchResponse {}

message IndexRequest {}
message IndexResponse {}
message OrchestrateRequest {}
message OrchestrateResponse {}
